<!doctype html><html lang=cs class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://gothic-modding-community.github.io/gmc/cs/zengin/general_info/object_persistence/ rel=canonical><link href=../directory_structure/ rel=prev><link href=../vdfs/ rel=next><link rel=icon href=../../../../assets/images/gmc_logo.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.1.5"><title>Object persistence - Gothic Modding Community</title><link rel=stylesheet href=../../../../assets/stylesheets/main.7a7fce14.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.a0c5b2b5.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"JetBrains Mono"}</style><link rel=stylesheet href=../../../../assets/stylesheets/extra.09256e.min.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=light-blue> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#object-persistence class=md-skip> P콏esko캜it obsah </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <div class=gmc-announce> Tato str치nka je코t캩 nebyla p콏elo쬰na do 캜e코tiny, proto je zobrazena v angli캜tin캩. <a href=/gmc/cs/contribute/#translations>Podpo콏 n치s a pomoz n치m s p콏ekladem!</a> </div> <script>
        const gGMC_SELECT_VERSION = "Vyberte verzi";
        const gGMC_TRANSLATE_CTA = "Podpo콏 n치s a pomoz n치m s p콏ekladem!";
        const gGMC_PAGE_LOCALE = "cs";
        const gGMC_PAGE_FILE_LOCALE = "None";
        const gGMC_TRANSLATE_SVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.5 12c0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2 0 .37-.03.73-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10C6.47 2 2 6.5 2 12s4.5 10 10 10c.59 0 1.16-.06 1.72-.16A5.9 5.9 0 0 1 13 19c0-.29.03-.57.07-.85-.32.63-.67 1.24-1.07 1.81-.83-1.2-1.5-2.53-1.91-3.96h3.72a5.95 5.95 0 0 1 2.59-2.4c.06-.53.1-1.06.1-1.6M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2H4.26m.82 2H8c.35 1.25.8 2.45 1.4 3.56A8.008 8.008 0 0 1 5.08 16M8 8H5.08A7.923 7.923 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m6.34 6H9.66c-.1-.66-.16-1.32-.16-2s.06-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2m.25-9.56c1.84.63 3.37 1.9 4.33 3.56h-2.95a15.65 15.65 0 0 0-1.38-3.56M23 18v2h-3v3h-2v-3h-3v-2h3v-3h2v3h3Z"/></svg>';
    </script> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Z치hlav칤> <a href=../../../ title="Gothic Modding Community" class="md-header__button md-logo" aria-label="Gothic Modding Community" data-md-component=logo> <img src=../../../../assets/images/gmc_logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Gothic Modding Community </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Object persistence </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=light-blue aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg> </label> </form> <div class=md-header__option> <div class=md-select> <button class="md-header__button md-icon" aria-label="Zvolte jazyk"> <img alt=游뻟릖 class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f1e8-1f1ff.svg title=:flag_cz:> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a href=../../../../zengin/general_info/object_persistence/ hreflang=en class=md-select__link> <img alt=游섫릖 class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f1ec-1f1e7.svg title=:flag_gb:> English </a> </li> <li class=md-select__item> <a href=../../../../pl/zengin/general_info/object_persistence/ hreflang=pl class=md-select__link> <img alt=游왫릖 class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f1f5-1f1f1.svg title=:flag_pl:> Polski </a> </li> <li class=md-select__item> <a href=./ hreflang=cs class=md-select__link> <img alt=游뻟릖 class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f1e8-1f1ff.svg title=:flag_cz:> 캛e코tina </a> </li> </ul> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Hledat placeholder=Hledat autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Vyhled치v치n칤> <button type=reset class="md-search__icon md-icon" title=Vy캜istit aria-label=Vy캜istit tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Inicializace vyhled치v치n칤 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/Gothic-Modding-Community/gmc/ title="P콏ej칤t do repozit치콏e" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> Gothic-Modding-Community/gmc </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Karty data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../ class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> ZenGin (G1/G2) </a> </li> <li class=md-tabs__item> <a href=../../../genome/ class=md-tabs__link> Genome (G3/R1) </a> </li> <li class=md-tabs__item> <a href=../../../contribute/ class=md-tabs__link> How To Contribute </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigace data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../ title="Gothic Modding Community" class="md-nav__button md-logo" aria-label="Gothic Modding Community" data-md-component=logo> <img src=../../../../assets/images/gmc_logo.png alt=logo> </a> Gothic Modding Community </label> <div class=md-nav__source> <a href=https://github.com/Gothic-Modding-Community/gmc/ title="P콏ej칤t do repozit치콏e" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> Gothic-Modding-Community/gmc </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <div class="md-nav__link md-nav__link--index "> <a href=../../../ >Home</a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../ >ZenGin (G1/G2)</a> <label for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> ZenGin (G1/G2) </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2 checked> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> General information <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> General information </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../directory_structure/ class=md-nav__link> Directory structure </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Object persistence <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Object persistence </a> <nav class="md-nav md-nav--secondary" aria-label=Obsah> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Obsah </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#archive-format class=md-nav__link> Archive format </a> <nav class=md-nav aria-label="Archive format"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#header class=md-nav__link> Header </a> </li> <li class=md-nav__item> <a href=#contents class=md-nav__link> Contents </a> <nav class=md-nav aria-label=Contents> <ul class=md-nav__list> <li class=md-nav__item> <a href=#chunks class=md-nav__link> Chunks </a> </li> <li class=md-nav__item> <a href=#properties class=md-nav__link> Properties </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#implementation class=md-nav__link> Implementation </a> <nav class=md-nav aria-label=Implementation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#a-practical-example class=md-nav__link> A practical example </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#final-thoughts class=md-nav__link> Final thoughts </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../vdfs/ class=md-nav__link> VDFS virtual file system </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../anims/ >Animations</a> <label for=__nav_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Animations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../anims/events/ class=md-nav__link> EventBlocks </a> </li> <li class=md-nav__item> <a href=../../anims/mds/ class=md-nav__link> MDS ModelScript </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_4> <label class=md-nav__link for=__nav_2_3_4 id=__nav_2_3_4_label tabindex=0> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../anims/tutorials/standalone_animation/ class=md-nav__link> Standalone animation </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../meshes/ class=md-nav__link> Meshes </a> </li> <li class=md-nav__item> <a href=../../music/ class=md-nav__link> Music </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6> <div class="md-nav__link md-nav__link--index "> <a href=../../scripts/ >Scripts</a> <label for=__nav_2_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> Scripts </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_1> <label class=md-nav__link for=__nav_2_6_1 id=__nav_2_6_1_label tabindex=0> Classes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_6_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_1> <span class="md-nav__icon md-icon"></span> Classes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../scripts/classes/c_info/ class=md-nav__link> C_INFO </a> </li> <li class=md-nav__item> <a href=../../scripts/classes/c_item/ class=md-nav__link> C_ITEM </a> </li> <li class=md-nav__item> <a href=../../scripts/classes/c_svm/ class=md-nav__link> C_SVM </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2> <div class="md-nav__link md-nav__link--index "> <a href=../../scripts/extenders/ >Extenders</a> <label for=__nav_2_6_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2> <span class="md-nav__icon md-icon"></span> Extenders </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2_1> <div class="md-nav__link md-nav__link--index "> <a href=../../scripts/extenders/afsp/ >AFSP</a> <label for=__nav_2_6_2_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_6_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2_1> <span class="md-nav__icon md-icon"></span> AFSP </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../scripts/extenders/afsp/afsp_eim/ class=md-nav__link> Enhanced Info Manager </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../scripts/extenders/ikarus/ >Ikarus</a> <label for=__nav_2_6_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_6_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2_3> <span class="md-nav__icon md-icon"></span> Ikarus </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2_3_1> <label class=md-nav__link for=__nav_2_6_2_3_1 id=__nav_2_6_2_3_1_label tabindex=0> Functions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_6_2_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2_3_1> <span class="md-nav__icon md-icon"></span> Functions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../scripts/extenders/ikarus/functions/menu_access/ class=md-nav__link> Access Menu Objects </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/ikarus/functions/ini_access/ class=md-nav__link> Ini File Access </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/ikarus/functions/keyboard/ class=md-nav__link> Keyboard </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/ikarus/functions/mem_access/ class=md-nav__link> Memory Access </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/ikarus/functions/win_utilities/ class=md-nav__link> Windows Utilities </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../scripts/extenders/ikarus/examples/ class=md-nav__link> Examples </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../scripts/extenders/lego/ >LeGo</a> <label for=__nav_2_6_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_6_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2_4> <span class="md-nav__icon md-icon"></span> LeGo </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2_4_1> <label class=md-nav__link for=__nav_2_6_2_4_1 id=__nav_2_6_2_4_1_label tabindex=0> Applications <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_6_2_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2_4_1> <span class="md-nav__icon md-icon"></span> Applications </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../scripts/extenders/lego/applications/anim8/ class=md-nav__link> Anim8 </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/applications/bars/ class=md-nav__link> Bars </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/applications/bloodsplats/ class=md-nav__link> Bloodsplats </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/applications/buffs/ class=md-nav__link> Buffs </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/applications/console_commands/ class=md-nav__link> Console Commands </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/applications/cursor/ class=md-nav__link> Cursor </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/applications/dialoggestures/ class=md-nav__link> Dialoggestures </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/applications/focusnames/ class=md-nav__link> Focusnames </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/applications/gamestate/ class=md-nav__link> Gamestate </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/applications/names/ class=md-nav__link> Names </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/applications/render/ class=md-nav__link> Render </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/applications/saves/ class=md-nav__link> Saves </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/applications/trialoge/ class=md-nav__link> Trialoge </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2_4_3> <label class=md-nav__link for=__nav_2_6_2_4_3 id=__nav_2_6_2_4_3_label tabindex=0> Tools <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_6_2_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2_4_3> <span class="md-nav__icon md-icon"></span> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../scripts/extenders/lego/tools/ai_function/ class=md-nav__link> AI_Function </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/tools/binary_machines/ class=md-nav__link> BinaryMachines </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/tools/event_handler/ class=md-nav__link> EventHandler </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/tools/frame_functions/ class=md-nav__link> FrameFunctions </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/tools/hashtables/ class=md-nav__link> Hashtables </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/tools/hook_dae/ class=md-nav__link> HookDaedalus </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/tools/hook_engine/ class=md-nav__link> HookEngine </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/tools/int64/ class=md-nav__link> Int64 </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/tools/item_helper/ class=md-nav__link> ItemHelper </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/tools/locals/ class=md-nav__link> Locals </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/tools/misc/ class=md-nav__link> Misc </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/tools/queue/ class=md-nav__link> Queue </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/tools/random/ class=md-nav__link> Random </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/tools/talents/ class=md-nav__link> Talents </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/lego/tools/timer/ class=md-nav__link> Timer </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2_4_4> <label class=md-nav__link for=__nav_2_6_2_4_4 id=__nav_2_6_2_4_4_label tabindex=0> Various <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_6_2_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2_4_4> <span class="md-nav__icon md-icon"></span> Various </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../scripts/extenders/lego/various/userconstants/ class=md-nav__link> User constants </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2_5> <div class="md-nav__link md-nav__link--index "> <a href=../../scripts/extenders/zparserextender/ >zParserExtender</a> <label for=__nav_2_6_2_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_6_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2_5> <span class="md-nav__icon md-icon"></span> zParserExtender </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2_5_1> <label class=md-nav__link for=__nav_2_6_2_5_1 id=__nav_2_6_2_5_1_label tabindex=0> Classes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_6_2_5_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2_5_1> <span class="md-nav__icon md-icon"></span> Classes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/classes/c_trigger/ class=md-nav__link> C_Trigger class </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/classes/helperclasses/ class=md-nav__link> Engine classes </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../scripts/extenders/zparserextender/daedalus_injection/ >Daedalus injection</a> <label for=__nav_2_6_2_5_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_6_2_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2_5_2> <span class="md-nav__icon md-icon"></span> Daedalus injection </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/daedalus_injection/hooks/ class=md-nav__link> Hooking </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/daedalus_injection/meta/ class=md-nav__link> META block </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/daedalus_injection/other/ class=md-nav__link> Other features </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2_5_3> <label class=md-nav__link for=__nav_2_6_2_5_3 id=__nav_2_6_2_5_3_label tabindex=0> Externals <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_6_2_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2_5_3> <span class="md-nav__icon md-icon"></span> Externals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/externals/ai/ class=md-nav__link> AI functions </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/externals/cast/ class=md-nav__link> CAST functions </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/externals/events_vars/ class=md-nav__link> Event functions </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/externals/hlp/ class=md-nav__link> HLP functions </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/externals/log/ class=md-nav__link> Log functions </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/externals/mdl/ class=md-nav__link> MDL functions </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/externals/mob/ class=md-nav__link> MOB functions </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/externals/menu/ class=md-nav__link> Menu function </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/externals/npc/ class=md-nav__link> NPC functions </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/externals/par/ class=md-nav__link> PAR functions </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/externals/string/ class=md-nav__link> String functions </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/externals/vob/ class=md-nav__link> VOB functions </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/externals/wld/ class=md-nav__link> WLD functions </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2_5_4> <label class=md-nav__link for=__nav_2_6_2_5_4 id=__nav_2_6_2_5_4_label tabindex=0> Syntax extensions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_6_2_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2_5_4> <span class="md-nav__icon md-icon"></span> Syntax extensions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/syntax_extensions/dialogues/ class=md-nav__link> Dialogue constants </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/syntax_extensions/events/ class=md-nav__link> Event functions </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/syntax_extensions/extern/ class=md-nav__link> Extern binding </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/syntax_extensions/namespaces/ class=md-nav__link> Namespaces </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/syntax_extensions/testelse/ class=md-nav__link> Test-else binding </a> </li> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/syntax_extensions/while/ class=md-nav__link> While loop </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2_5_6> <label class=md-nav__link for=__nav_2_6_2_5_6 id=__nav_2_6_2_5_6_label tabindex=0> Examples <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_6_2_5_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2_5_6> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../scripts/extenders/zparserextender/examples/signposts/ class=md-nav__link> Sign post example </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_7> <div class="md-nav__link md-nav__link--index "> <a href=../../sound/ >Sound</a> <label for=__nav_2_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> Sound </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_7_2> <label class=md-nav__link for=__nav_2_7_2 id=__nav_2_7_2_label tabindex=0> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_7_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_7_2> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../sound/tutorials/change_sfx/ class=md-nav__link> Changing Sound Effect </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../textures/ class=md-nav__link> Textures </a> </li> <li class=md-nav__item> <a href=../../video/ class=md-nav__link> Video </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_10> <div class="md-nav__link md-nav__link--index "> <a href=../../worlds/ >Worlds</a> <label for=__nav_2_10> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_10_label aria-expanded=false> <label class=md-nav__title for=__nav_2_10> <span class="md-nav__icon md-icon"></span> Worlds </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../worlds/spacer/ class=md-nav__link> Spacer </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_11> <div class="md-nav__link md-nav__link--index "> <a href=../../tools/ >Tools</a> <label for=__nav_2_11> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_11_label aria-expanded=false> <label class=md-nav__title for=__nav_2_11> <span class="md-nav__icon md-icon"></span> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_11_1> <label class=md-nav__link for=__nav_2_11_1 id=__nav_2_11_1_label tabindex=0> Daedalus <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_11_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_11_1> <span class="md-nav__icon md-icon"></span> Daedalus </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tools/daedalus_tools/daedalus_language_server/ class=md-nav__link> Daedalus Language Server </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../tools/gothic_sourcer/ class=md-nav__link> Gothic Sourcer </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_11_4> <label class=md-nav__link for=__nav_2_11_4 id=__nav_2_11_4_label tabindex=0> VDFS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_11_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_11_4> <span class="md-nav__icon md-icon"></span> VDFS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tools/vdfs_tools/gothic_vdfs/ class=md-nav__link> GothicVDFS </a> </li> <li class=md-nav__item> <a href=../../tools/vdfs_tools/vdfs_tool/ class=md-nav__link> VDFS Tool </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_12> <div class="md-nav__link md-nav__link--index "> <a href=../../union/ >Union</a> <label for=__nav_2_12> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_12_label aria-expanded=false> <label class=md-nav__title for=__nav_2_12> <span class="md-nav__icon md-icon"></span> Union </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_12_1> <label class=md-nav__link for=__nav_2_12_1 id=__nav_2_12_1_label tabindex=0> Plugins <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_12_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_12_1> <span class="md-nav__icon md-icon"></span> Plugins </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_12_1_1> <div class="md-nav__link md-nav__link--index "> <a href=../../union/plugins/zgamepad/ >zGamePad</a> <label for=__nav_2_12_1_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_12_1_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_12_1_1> <span class="md-nav__icon md-icon"></span> zGamePad </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../union/plugins/zgamepad/controls/ class=md-nav__link> Controls customization </a> </li> <li class=md-nav__item> <a href=../../union/plugins/zgamepad/keys_engine_absolute/ class=md-nav__link> Engine absolute keys </a> </li> <li class=md-nav__item> <a href=../../union/plugins/zgamepad/keys_engine_logical/ class=md-nav__link> Engine logical keys </a> </li> <li class=md-nav__item> <a href=../../union/plugins/zgamepad/keys_gamepad/ class=md-nav__link> Gamepad keys </a> </li> <li class=md-nav__item> <a href=../../union/plugins/zgamepad/logical_functions/ class=md-nav__link> Logical functions </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../genome/ >Genome (G3/R1)</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Genome (G3/R1) </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> General information <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> General information </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../genome/general_info/object_persistence/ class=md-nav__link> Object persistence </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../genome/tools/ >Tools</a> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Tools </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../contribute/ >How To Contribute</a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> How To Contribute </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=Obsah> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Obsah </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#archive-format class=md-nav__link> Archive format </a> <nav class=md-nav aria-label="Archive format"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#header class=md-nav__link> Header </a> </li> <li class=md-nav__item> <a href=#contents class=md-nav__link> Contents </a> <nav class=md-nav aria-label=Contents> <ul class=md-nav__list> <li class=md-nav__item> <a href=#chunks class=md-nav__link> Chunks </a> </li> <li class=md-nav__item> <a href=#properties class=md-nav__link> Properties </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#implementation class=md-nav__link> Implementation </a> <nav class=md-nav aria-label=Implementation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#a-practical-example class=md-nav__link> A practical example </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#final-thoughts class=md-nav__link> Final thoughts </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/Gothic-Modding-Community/gmc/edit/main/docs/zengin/general_info/object_persistence.md title="Upravit tuto str치nku" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <a href=https://github.com/Gothic-Modding-Community/gmc/raw/main/docs/zengin/general_info/object_persistence.md title="Zobrazit zdroj t칠to str치nky" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg> </a> <div><h1 id=object-persistence>Object persistence<a class=headerlink href=#object-persistence title="Permanent link"></a></h1> <p>In order to simplify the process of loading and saving data of various types to and from the user's hard-drive, ZenGin implements a simple object persistence system using the <code>zCArchiver</code> class and its derivatives that allow the individual engine classes to implement a routine specifying which data should be saved or loaded from disk and in which manner.</p> <p>An object that is derived from the <code>zCObject</code> class may overload the <code>Archive</code> and <code>Unarchive</code> virtual methods. The class may then call on an interface provided by the <code>zCArchiver</code> class within these methods which allows it to directly read from or write to a stream using several modes. Those are ASCII and BinSafe by default. There are, however, more options, as is explained below.</p> <h2 id=archive-format>Archive format<a class=headerlink href=#archive-format title="Permanent link"></a></h2> <p>In order to better understand how this process works, it would be best to look at an example of a .ZEN file containing an instance of an <code>oCWorld</code> object.</p> <h3 id=header>Header<a class=headerlink href=#header title="Permanent link"></a></h3> <p>When you open up a ZenGin archive, you will see the following at the start of the file:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#example-0-1> 1</a></span>
<span class=normal><a href=#example-0-2> 2</a></span>
<span class=normal><a href=#example-0-3> 3</a></span>
<span class=normal><a href=#example-0-4> 4</a></span>
<span class=normal><a href=#example-0-5> 5</a></span>
<span class=normal><a href=#example-0-6> 6</a></span>
<span class=normal><a href=#example-0-7> 7</a></span>
<span class=normal><a href=#example-0-8> 8</a></span>
<span class=normal><a href=#example-0-9> 9</a></span>
<span class=normal><a href=#example-0-10>10</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=example-0-1><a id=example-0-1 name=example-0-1></a>ZenGin Archive
</span><span id=example-0-2><a id=example-0-2 name=example-0-2></a>ver 1
</span><span id=example-0-3><a id=example-0-3 name=example-0-3></a>zCArchiverGeneric
</span><span id=example-0-4><a id=example-0-4 name=example-0-4></a>ASCII
</span><span id=example-0-5><a id=example-0-5 name=example-0-5></a>saveGame 0
</span><span id=example-0-6><a id=example-0-6 name=example-0-6></a>date 7.1.2001 23:9:19
</span><span id=example-0-7><a id=example-0-7 name=example-0-7></a>user roeske
</span><span id=example-0-8><a id=example-0-8 name=example-0-8></a>END
</span><span id=example-0-9><a id=example-0-9 name=example-0-9></a>objects 2594     
</span><span id=example-0-10><a id=example-0-10 name=example-0-10></a>END
</span></code></pre></div></td></tr></table></div> <p>Let's look at each of these properties and what they mean:</p> <p><code>ZenGin Archive</code></p> <p>This simply specifies that the following data is an <code>zCArchiver</code> archive.</p> <p><code>ver 1</code></p> <p>Version specification. Can be either <code>0</code> or <code>1</code>. Both Gothic 1 and 2 are already on version 1, although version 0 archives can also be occasionally found.</p> <p><code>zCArchiverGeneric</code></p> <p>Specifies which derived <code>zCArchiver</code> class should be used to read this archive. Accepted values are <code>zCArchiverGeneric</code> for ASCII and Binary archives, and <code>zCArchiverBinSafe</code> for BinSafe archives. More info below.<br> This property might not be present in older archives.</p> <p><code>ASCII</code></p> <p>This is the most important part of the header as it specifies in which format should the data be stored. There are 4 different modes:</p> <ul> <li><strong>ASCII</strong> - The simplest one. It stores data in human-readable ASCII notation (not unlike JSON for example). This is usually used when saving data during development and/or testing, while the final version of said data will most likely be stored as BIN_SAFE.</li> <li><strong>ASCII_PROPS</strong> - Same as ASCII except with more additional data that the developer can specify for visual clarity. In practice, it is not used anywhere and mostly serves only to prettify debug info (try typing <code>ZWORLD VOBPROPS</code> in the console and look in zSpy ;) ).</li> <li><strong>BINARY</strong> - Binary representation of the class instance, which mostly copies the data 1:1 into/from the stream. In practice, this format is only used to store savefiles (.SAV).</li> <li><strong>BIN_SAFE</strong> - BinSafe, short for Binary Safe, is an extended version of Binary which stores type information along with the data itself. This is meant to make error checking for invalid data easier. There are other changes which are explained below. Most, if not all world files (.ZEN), are stored in this format.</li> </ul> <p><code>saveGame 0</code></p> <p>Specifies if this archive is a savefile. This property might not be present in older archives.</p> <p><code>date 7.1.2001 23:9:19</code></p> <p>The date at which this archive was created.</p> <p><code>user roeske</code></p> <p>The user which created the archive. This property might not be present in older archives.</p> <p><code>END</code></p> <p>Tells the parses that this is the end of the header.</p> <p>We may additionally find a property called <code>csum</code> in version 0 archives which stores the checksum of the whole archive. This property is, however, unused and equals <code>00000000</code> by default.</p> <p>In order to correctly read the archive's header across varying engine versions, one should not count on the properties always being in the same order or even being there at all.</p> <p>If the archive utilizes <code>zCArchiverGeneric</code> then this header will also be followed by a short section specifying the number of object instances in this archive. This value will be used to initialize the objectList, which is an array of pointers where the addresses of loaded objects will be stored for later referencing. This property would be directly part of the main header in older versions.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#example-1-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=example-1-1><a id=example-1-1 name=example-1-1></a>objects 2594 END  
</span></code></pre></div></td></tr></table></div> <p>If the archive is created using <code>zCArchiverBinSafe</code>, this data will be stored in the following binary structure:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#example-2-1>1</a></span>
<span class=normal><a href=#example-2-2>2</a></span>
<span class=normal><a href=#example-2-3>3</a></span>
<span class=normal><a href=#example-2-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=example-2-1><a id=example-2-1 name=example-2-1></a><span class=k>struct</span><span class=w> </span><span class=nc>BinSafeArchiveHeader</span><span class=w>  </span>
</span><span id=example-2-2><a id=example-2-2 name=example-2-2></a><span class=p>{</span><span class=w>  </span>
</span><span id=example-2-3><a id=example-2-3 name=example-2-3></a><span class=w>    </span><span class=kt>uint32_t</span><span class=w> </span><span class=n>version</span><span class=p>;</span><span class=w>     </span><span class=c1>// Always equals 2 uint32_t objectCount;  // Serves the same function as "objects n" uint32_t chunkPos;    // Offset to chunk hash table};</span>
</span><span id=example-2-4><a id=example-2-4 name=example-2-4></a><span class=p>};</span><span class=w>  </span>
</span></code></pre></div></td></tr></table></div> <h3 id=contents>Contents<a class=headerlink href=#contents title="Permanent link"></a></h3> <p>Looking further into the archive, we see what appears to be a nested structure.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#example-3-1> 1</a></span>
<span class=normal><a href=#example-3-2> 2</a></span>
<span class=normal><a href=#example-3-3> 3</a></span>
<span class=normal><a href=#example-3-4> 4</a></span>
<span class=normal><a href=#example-3-5> 5</a></span>
<span class=normal><a href=#example-3-6> 6</a></span>
<span class=normal><a href=#example-3-7> 7</a></span>
<span class=normal><a href=#example-3-8> 8</a></span>
<span class=normal><a href=#example-3-9> 9</a></span>
<span class=normal><a href=#example-3-10>10</a></span>
<span class=normal><a href=#example-3-11>11</a></span>
<span class=normal><a href=#example-3-12>12</a></span>
<span class=normal><a href=#example-3-13>13</a></span>
<span class=normal><a href=#example-3-14>14</a></span>
<span class=normal><a href=#example-3-15>15</a></span>
<span class=normal><a href=#example-3-16>16</a></span>
<span class=normal><a href=#example-3-17>17</a></span>
<span class=normal><a href=#example-3-18>18</a></span>
<span class=normal><a href=#example-3-19>19</a></span>
<span class=normal><a href=#example-3-20>20</a></span>
<span class=normal><a href=#example-3-21>21</a></span>
<span class=normal><a href=#example-3-22>22</a></span>
<span class=normal><a href=#example-3-23>23</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=example-3-1><a id=example-3-1 name=example-3-1></a>[% oCWorld:zCWorld 64513 0]
</span><span id=example-3-2><a id=example-3-2 name=example-3-2></a>    [VobTree % 0 0]
</span><span id=example-3-3><a id=example-3-3 name=example-3-3></a>        childs0=int:1
</span><span id=example-3-4><a id=example-3-4 name=example-3-4></a>        [% zCVobLevelCompo:zCVob 12289 1]
</span><span id=example-3-5><a id=example-3-5 name=example-3-5></a>            pack=int:0
</span><span id=example-3-6><a id=example-3-6 name=example-3-6></a>            presetName=string:
</span><span id=example-3-7><a id=example-3-7 name=example-3-7></a>            bbox3DWS=rawFloat:-71919.9609 -13091.8232 -59900 108999.992 20014.0352 67399.9922 
</span><span id=example-3-8><a id=example-3-8 name=example-3-8></a>            trafoOSToWSRot=raw:0000803f0000000000000000000000000000803f0000000000000000000000000000803f
</span><span id=example-3-9><a id=example-3-9 name=example-3-9></a>            trafoOSToWSPos=vec3:0 0 0
</span><span id=example-3-10><a id=example-3-10 name=example-3-10></a>            vobName=string:LEVEL-VOB
</span><span id=example-3-11><a id=example-3-11 name=example-3-11></a>            visual=string:SURFACE.3DS
</span><span id=example-3-12><a id=example-3-12 name=example-3-12></a>            showVisual=bool:0
</span><span id=example-3-13><a id=example-3-13 name=example-3-13></a>            visualCamAlign=enum:0
</span><span id=example-3-14><a id=example-3-14 name=example-3-14></a>            cdStatic=bool:1
</span><span id=example-3-15><a id=example-3-15 name=example-3-15></a>            cdDyn=bool:0
</span><span id=example-3-16><a id=example-3-16 name=example-3-16></a>            staticVob=bool:0
</span><span id=example-3-17><a id=example-3-17 name=example-3-17></a>            dynShadow=enum:0
</span><span id=example-3-18><a id=example-3-18 name=example-3-18></a>            [visual zCMesh 0 2]
</span><span id=example-3-19><a id=example-3-19 name=example-3-19></a>            []
</span><span id=example-3-20><a id=example-3-20 name=example-3-20></a>            [ai % 0 0]
</span><span id=example-3-21><a id=example-3-21 name=example-3-21></a>            []
</span><span id=example-3-22><a id=example-3-22 name=example-3-22></a>        []
</span><span id=example-3-23><a id=example-3-23 name=example-3-23></a>        ...
</span></code></pre></div></td></tr></table></div> <p>We primarily differentiate between chunks and properties within ZenGin archives: </p> <h4 id=chunks>Chunks<a class=headerlink href=#chunks title="Permanent link"></a></h4> <p>A chunk is a structure that groups properties together. For most of the time, a chunk represents a class instance. This is, however, not always true as classes may arbitrarily create chunks as is needed. For example, the sample above contains a chunk called <code>VobTree</code>, which does not represent a class instance, but only serves to make the reading of the archive easier. </p> <p>While in ASCII mode, the start of a chunk is represented using square brackets. </p> <p><code>[% oCWorld:zCWorld 64513 0]</code> </p> <p>There are 4 pieces of data separated by spaces inside the start of each chunk, which are: </p> <ul> <li><strong>Object name</strong> - The name of the chunk to use while reading. If the chunk has no name, then it will be simply equal to <code>%</code>. </li> <li><strong>Class name</strong> - The name of the class which this chunk represents. Class names are stored with their full inheritance hierarchy (e.g. <code>oCMobLadder:oCMobInter:oCMOB:zCVob</code>). In case the chunk is not an object, but an arbitrary chunk, then this field will be equal to <code>%</code> (<code>%</code> can also mean that this chunk is a nullptr). In some cases you may encounter the symbol <code>춶</code> instead. This means that the object already exists and that the parser should look for it in the objectList using the object index. Using this mechanism, a single instance can be referenced multiple times without worrying about duplicity. </li> <li><strong>Class version</strong> - Used to ensure that the data being read is compatible with the current game/engine version, so that there are no mismatches in the data pattern. This value is different for every class and varies between game versions. </li> <li><strong>Object index</strong> - An index into the objectList under which this object will be stored. If the class name is equal to <code>춶</code>, then this value will be used to retrieve an existing instance from the objectList. </li> </ul> <p>If this is a Binary archive, the same data will be stored in the following binary structure: </p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#example-4-1>1</a></span>
<span class=normal><a href=#example-4-2>2</a></span>
<span class=normal><a href=#example-4-3>3</a></span>
<span class=normal><a href=#example-4-4>4</a></span>
<span class=normal><a href=#example-4-5>5</a></span>
<span class=normal><a href=#example-4-6>6</a></span>
<span class=normal><a href=#example-4-7>7</a></span>
<span class=normal><a href=#example-4-8>8</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=example-4-1><a id=example-4-1 name=example-4-1></a><span class=k>struct</span><span class=w> </span><span class=nc>BinaryObjectHeader</span>
</span><span id=example-4-2><a id=example-4-2 name=example-4-2></a><span class=p>{</span>
</span><span id=example-4-3><a id=example-4-3 name=example-4-3></a><span class=w>    </span><span class=kt>uint32_t</span><span class=w>    </span><span class=n>objectSize</span><span class=p>;</span><span class=w>        </span><span class=c1>// Size of the whole object in bytes</span>
</span><span id=example-4-4><a id=example-4-4 name=example-4-4></a><span class=w>    </span><span class=kt>uint16_t</span><span class=w>    </span><span class=n>classVersion</span><span class=p>;</span>
</span><span id=example-4-5><a id=example-4-5 name=example-4-5></a><span class=w>    </span><span class=kt>uint32_t</span><span class=w>    </span><span class=n>objectIndex</span><span class=p>;</span>
</span><span id=example-4-6><a id=example-4-6 name=example-4-6></a><span class=w>    </span><span class=kt>char</span><span class=w>        </span><span class=n>objectName</span><span class=p>[];</span><span class=w>    </span><span class=c1>// Null-terminated string</span>
</span><span id=example-4-7><a id=example-4-7 name=example-4-7></a><span class=w>    </span><span class=kt>char</span><span class=w>        </span><span class=n>className</span><span class=p>[];</span><span class=w>    </span><span class=c1>// Null-terminated string</span>
</span><span id=example-4-8><a id=example-4-8 name=example-4-8></a><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p>Oddly enough, if the archive is BinSafe, then the data will be encoded the same way as in ASCII mode, except that it will be stored as a type-checked property.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#example-5-1>1</a></span>
<span class=normal><a href=#example-5-2>2</a></span>
<span class=normal><a href=#example-5-3>3</a></span>
<span class=normal><a href=#example-5-4>4</a></span>
<span class=normal><a href=#example-5-5>5</a></span>
<span class=normal><a href=#example-5-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=example-5-1><a id=example-5-1 name=example-5-1></a><span class=k>struct</span><span class=w> </span><span class=nc>BinSafeObjectHeader</span>
</span><span id=example-5-2><a id=example-5-2 name=example-5-2></a><span class=p>{</span>
</span><span id=example-5-3><a id=example-5-3 name=example-5-3></a><span class=w>    </span><span class=kt>uint32_t</span><span class=w>    </span><span class=n>type</span><span class=p>;</span><span class=w>    </span><span class=c1>// 0x1 = TYPE_STRING</span>
</span><span id=example-5-4><a id=example-5-4 name=example-5-4></a><span class=w>    </span><span class=kt>uint16_t</span><span class=w>    </span><span class=n>length</span><span class=p>;</span><span class=w>    </span><span class=c1>// Length of the text</span>
</span><span id=example-5-5><a id=example-5-5 name=example-5-5></a><span class=w>    </span><span class=kt>char</span><span class=w>        </span><span class=n>text</span><span class=p>[];</span><span class=w>    </span><span class=c1>// [% oCWorld:zCWorld 64513 0]</span>
</span><span id=example-5-6><a id=example-5-6 name=example-5-6></a><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p>In ASCII mode <code>[]</code> represents the end of the current chunk.</p> <h4 id=properties>Properties<a class=headerlink href=#properties title="Permanent link"></a></h4> <p>We find properties inside the chunks which are key-value pairs that classes use to store the actual data. Each property stores its name, type and value. In ASCII mode the format for this is<code>name=type:value</code>.</p> <p>For example:</p> <p><code>visual=string:SURFACE.3DS</code></p> <p>By default, <code>zCArchiver</code> allows to store properties of the following types:</p> <ul> <li> <p><strong>Int</strong> - A regular 32-bit integer. In ASCII mode, int gets stored as <code>name=int:1</code>, while in Binary mode, it's just the raw value stored as 4 bytes.</p> </li> <li> <p><strong>Byte</strong> - A 8-bit integer. ASCII mode doesn't differentiate between Int and Byte, so this will be stored as <code>name=int:1</code> regardless. Binary mode stores only the single byte.</p> </li> <li> <p><strong>Word</strong> - A 16-bit integer. ASCII mode doesn't differentiate between Int and Word, so this will be stored as <code>name=int:1</code> regardless. Binary mode stores only the 2 bytes.</p> </li> <li> <p><strong>Float</strong> - A standard IEEE 754 32-bit floating point number. In ASCII mode the format is <code>name=float:1.0</code>, while in Binary mode the float gets stored raw as 4 bytes.</p> </li> <li> <p><strong>Bool</strong> - Stores a single-byte boolean value. In ASCII mode its <code>name=bool:1</code> and in Binary mode it's a single byte.</p> </li> <li> <p><strong>String</strong> - An ASCII encoded string. While in ASCII mode, strings are stored as <code>name=string:value</code>. In Binary mode, strings are NULL terminated.</p> </li> <li> <p><strong>Vec3</strong> - A three component vector, mainly used to store positional data. The ASCII mode format is <code>name=vec3:1.0 1.0 1.0</code>. In Binary mode the three components of the vector are stored in series, which equals to a total size of 12 bytes.</p> </li> <li> <p><strong>Color</strong> - A 32-bit color value stored as BGRA. In ASCII mode the color is stored as <code>name=color:255 255 255 255</code> while in Binary mode it's just 4 raw bytes.</p> </li> <li> <p><strong>Raw</strong> - Raw binary data. In order to maintain readability, in ASCII mode this gets stored as a hex encoded string such as <code>name=raw:63D15B07</code>. In Binary mode, only the data itself is stored, without any other info. Be aware that due to this you must know the size of the data beforehand.</p> </li> <li> <p><strong>RawFloat</strong> - An array of floats, mainly used to store bounding boxes. In ASCII mode, the floats are stored as <code>name=rawFloat:1.0 1.0 1.0 1.0 1.0 1.0</code>. In Binary mode the floats are stored in series as raw bytes. Same as with <code>Raw</code>, you must know the size of the array beforehand.</p> </li> <li> <p><strong>Enum</strong> - An enum value. In ASCII mode, it gets stored as <code>name=enum:1</code>. In Binary mode, it behaves the same as <code>Int</code>.</p> </li> </ul> <p>As you might have noticed, binary mode doesn't perform any kind of checks on if it's reading the right property or even data of the correct type. This is why BinSafe mode exists, as it stores the property type in along with the data itself.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#example-6-1> 1</a></span>
<span class=normal><a href=#example-6-2> 2</a></span>
<span class=normal><a href=#example-6-3> 3</a></span>
<span class=normal><a href=#example-6-4> 4</a></span>
<span class=normal><a href=#example-6-5> 5</a></span>
<span class=normal><a href=#example-6-6> 6</a></span>
<span class=normal><a href=#example-6-7> 7</a></span>
<span class=normal><a href=#example-6-8> 8</a></span>
<span class=normal><a href=#example-6-9> 9</a></span>
<span class=normal><a href=#example-6-10>10</a></span>
<span class=normal><a href=#example-6-11>11</a></span>
<span class=normal><a href=#example-6-12>12</a></span>
<span class=normal><a href=#example-6-13>13</a></span>
<span class=normal><a href=#example-6-14>14</a></span>
<span class=normal><a href=#example-6-15>15</a></span>
<span class=normal><a href=#example-6-16>16</a></span>
<span class=normal><a href=#example-6-17>17</a></span>
<span class=normal><a href=#example-6-18>18</a></span>
<span class=normal><a href=#example-6-19>19</a></span>
<span class=normal><a href=#example-6-20>20</a></span>
<span class=normal><a href=#example-6-21>21</a></span>
<span class=normal><a href=#example-6-22>22</a></span>
<span class=normal><a href=#example-6-23>23</a></span>
<span class=normal><a href=#example-6-24>24</a></span>
<span class=normal><a href=#example-6-25>25</a></span>
<span class=normal><a href=#example-6-26>26</a></span>
<span class=normal><a href=#example-6-27>27</a></span>
<span class=normal><a href=#example-6-28>28</a></span>
<span class=normal><a href=#example-6-29>29</a></span>
<span class=normal><a href=#example-6-30>30</a></span>
<span class=normal><a href=#example-6-31>31</a></span>
<span class=normal><a href=#example-6-32>32</a></span>
<span class=normal><a href=#example-6-33>33</a></span>
<span class=normal><a href=#example-6-34>34</a></span>
<span class=normal><a href=#example-6-35>35</a></span>
<span class=normal><a href=#example-6-36>36</a></span>
<span class=normal><a href=#example-6-37>37</a></span>
<span class=normal><a href=#example-6-38>38</a></span>
<span class=normal><a href=#example-6-39>39</a></span>
<span class=normal><a href=#example-6-40>40</a></span>
<span class=normal><a href=#example-6-41>41</a></span>
<span class=normal><a href=#example-6-42>42</a></span>
<span class=normal><a href=#example-6-43>43</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=example-6-1><a id=example-6-1 name=example-6-1></a><span class=k>enum</span><span class=w> </span><span class=nc>TYPE</span>
</span><span id=example-6-2><a id=example-6-2 name=example-6-2></a><span class=p>{</span>
</span><span id=example-6-3><a id=example-6-3 name=example-6-3></a><span class=w>    </span><span class=n>TYPE_STRING</span><span class=w>        </span><span class=o>=</span><span class=w> </span><span class=mh>0x1</span><span class=p>,</span>
</span><span id=example-6-4><a id=example-6-4 name=example-6-4></a><span class=w>    </span><span class=n>TYPE_INTEGER</span><span class=w>    </span><span class=o>=</span><span class=w> </span><span class=mh>0x2</span><span class=p>,</span>
</span><span id=example-6-5><a id=example-6-5 name=example-6-5></a><span class=w>    </span><span class=n>TYPE_FLOAT</span><span class=w>        </span><span class=o>=</span><span class=w> </span><span class=mh>0x3</span><span class=p>,</span>
</span><span id=example-6-6><a id=example-6-6 name=example-6-6></a><span class=w>    </span><span class=n>TYPE_BYTE</span><span class=w>        </span><span class=o>=</span><span class=w> </span><span class=mh>0x4</span><span class=p>,</span>
</span><span id=example-6-7><a id=example-6-7 name=example-6-7></a><span class=w>    </span><span class=n>TYPE_WORD</span><span class=w>        </span><span class=o>=</span><span class=w> </span><span class=mh>0x5</span><span class=p>,</span>
</span><span id=example-6-8><a id=example-6-8 name=example-6-8></a><span class=w>    </span><span class=n>TYPE_BOOL</span><span class=w>        </span><span class=o>=</span><span class=w> </span><span class=mh>0x6</span><span class=p>,</span>
</span><span id=example-6-9><a id=example-6-9 name=example-6-9></a><span class=w>    </span><span class=n>TYPE_VEC3</span><span class=w>        </span><span class=o>=</span><span class=w> </span><span class=mh>0x7</span><span class=p>,</span>
</span><span id=example-6-10><a id=example-6-10 name=example-6-10></a><span class=w>    </span><span class=n>TYPE_COLOR</span><span class=w>        </span><span class=o>=</span><span class=w> </span><span class=mh>0x8</span><span class=p>,</span>
</span><span id=example-6-11><a id=example-6-11 name=example-6-11></a><span class=w>    </span><span class=n>TYPE_RAW</span><span class=w>        </span><span class=o>=</span><span class=w> </span><span class=mh>0x9</span><span class=p>,</span>
</span><span id=example-6-12><a id=example-6-12 name=example-6-12></a><span class=w>    </span><span class=n>TYPE_RAWFLOAT</span><span class=w>    </span><span class=o>=</span><span class=w> </span><span class=mh>0x10</span><span class=p>,</span>
</span><span id=example-6-13><a id=example-6-13 name=example-6-13></a><span class=w>    </span><span class=n>TYPE_ENUM</span><span class=w>        </span><span class=o>=</span><span class=w> </span><span class=mh>0x11</span>
</span><span id=example-6-14><a id=example-6-14 name=example-6-14></a><span class=w>    </span><span class=n>TYPE_HASH</span><span class=w>        </span><span class=o>=</span><span class=w> </span><span class=mh>0x12</span><span class=p>,</span>
</span><span id=example-6-15><a id=example-6-15 name=example-6-15></a><span class=p>};</span>
</span><span id=example-6-16><a id=example-6-16 name=example-6-16></a>
</span><span id=example-6-17><a id=example-6-17 name=example-6-17></a><span class=k>struct</span><span class=w> </span><span class=nc>BinSafeProperty</span>
</span><span id=example-6-18><a id=example-6-18 name=example-6-18></a><span class=p>{</span>
</span><span id=example-6-19><a id=example-6-19 name=example-6-19></a><span class=w>    </span><span class=n>TYPE</span><span class=w> </span><span class=n>type</span><span class=p>;</span>
</span><span id=example-6-20><a id=example-6-20 name=example-6-20></a><span class=w>    </span><span class=k>union</span>
</span><span id=example-6-21><a id=example-6-21 name=example-6-21></a><span class=w>    </span><span class=p>{</span>
</span><span id=example-6-22><a id=example-6-22 name=example-6-22></a><span class=w>        </span><span class=k>struct</span>
</span><span id=example-6-23><a id=example-6-23 name=example-6-23></a><span class=w>        </span><span class=p>{</span>
</span><span id=example-6-24><a id=example-6-24 name=example-6-24></a><span class=w>            </span><span class=kt>uint16_t</span><span class=w>    </span><span class=n>stringLength</span><span class=p>;</span>
</span><span id=example-6-25><a id=example-6-25 name=example-6-25></a><span class=w>            </span><span class=kt>char</span><span class=w>        </span><span class=n>stringValue</span><span class=p>[];</span>
</span><span id=example-6-26><a id=example-6-26 name=example-6-26></a><span class=w>        </span><span class=p>}</span>
</span><span id=example-6-27><a id=example-6-27 name=example-6-27></a><span class=w>        </span><span class=kt>uint32_t</span><span class=w>    </span><span class=n>integerOrHashOrEnumValue</span><span class=p>;</span>
</span><span id=example-6-28><a id=example-6-28 name=example-6-28></a><span class=w>        </span><span class=kt>float</span><span class=w>        </span><span class=n>floatValue</span><span class=p>;</span>
</span><span id=example-6-29><a id=example-6-29 name=example-6-29></a><span class=w>        </span><span class=kt>uint8_t</span><span class=w>        </span><span class=n>byteOrBoolValue</span><span class=p>;</span>
</span><span id=example-6-30><a id=example-6-30 name=example-6-30></a><span class=w>        </span><span class=n>zVEC3</span><span class=w>        </span><span class=n>vec3Value</span><span class=p>;</span>
</span><span id=example-6-31><a id=example-6-31 name=example-6-31></a><span class=w>        </span><span class=n>zCOLOR</span><span class=w>        </span><span class=n>colorValue</span><span class=p>;</span>
</span><span id=example-6-32><a id=example-6-32 name=example-6-32></a><span class=w>        </span><span class=k>struct</span>
</span><span id=example-6-33><a id=example-6-33 name=example-6-33></a><span class=w>        </span><span class=p>{</span>
</span><span id=example-6-34><a id=example-6-34 name=example-6-34></a><span class=w>            </span><span class=kt>uint16_t</span><span class=w>    </span><span class=n>rawLength</span><span class=p>;</span>
</span><span id=example-6-35><a id=example-6-35 name=example-6-35></a><span class=w>            </span><span class=kt>char</span><span class=w>        </span><span class=n>rawValue</span><span class=p>[];</span>
</span><span id=example-6-36><a id=example-6-36 name=example-6-36></a><span class=w>        </span><span class=p>}</span>
</span><span id=example-6-37><a id=example-6-37 name=example-6-37></a><span class=w>        </span><span class=k>struct</span>
</span><span id=example-6-38><a id=example-6-38 name=example-6-38></a><span class=w>        </span><span class=p>{</span>
</span><span id=example-6-39><a id=example-6-39 name=example-6-39></a><span class=w>            </span><span class=kt>uint16_t</span><span class=w>    </span><span class=n>rawFloatLength</span><span class=p>;</span>
</span><span id=example-6-40><a id=example-6-40 name=example-6-40></a><span class=w>            </span><span class=kt>float</span><span class=w>        </span><span class=n>rawFloatValue</span><span class=p>[];</span>
</span><span id=example-6-41><a id=example-6-41 name=example-6-41></a><span class=w>        </span><span class=p>}</span><span class=w>        </span>
</span><span id=example-6-42><a id=example-6-42 name=example-6-42></a><span class=w>    </span><span class=p>};</span>
</span><span id=example-6-43><a id=example-6-43 name=example-6-43></a><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p>Looking at the enumeration of types, you might notice that BinSafe mode has an additional property type called Hash. BinSafe archives include a hash table which is stored in the following manner:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#example-7-1> 1</a></span>
<span class=normal><a href=#example-7-2> 2</a></span>
<span class=normal><a href=#example-7-3> 3</a></span>
<span class=normal><a href=#example-7-4> 4</a></span>
<span class=normal><a href=#example-7-5> 5</a></span>
<span class=normal><a href=#example-7-6> 6</a></span>
<span class=normal><a href=#example-7-7> 7</a></span>
<span class=normal><a href=#example-7-8> 8</a></span>
<span class=normal><a href=#example-7-9> 9</a></span>
<span class=normal><a href=#example-7-10>10</a></span>
<span class=normal><a href=#example-7-11>11</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=example-7-1><a id=example-7-1 name=example-7-1></a><span class=k>struct</span><span class=w> </span><span class=nc>BinSafeHashTable</span>
</span><span id=example-7-2><a id=example-7-2 name=example-7-2></a><span class=p>{</span>
</span><span id=example-7-3><a id=example-7-3 name=example-7-3></a><span class=w>    </span><span class=kt>uint32_t</span><span class=w> </span><span class=n>chunkCount</span><span class=p>;</span>
</span><span id=example-7-4><a id=example-7-4 name=example-7-4></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>chunkCount</span><span class=p>)</span>
</span><span id=example-7-5><a id=example-7-5 name=example-7-5></a><span class=w>    </span><span class=p>{</span>
</span><span id=example-7-6><a id=example-7-6 name=example-7-6></a><span class=w>        </span><span class=kt>uint16_t</span><span class=w>    </span><span class=n>stringLength</span><span class=p>;</span>
</span><span id=example-7-7><a id=example-7-7 name=example-7-7></a><span class=w>        </span><span class=kt>uint16_t</span><span class=w>    </span><span class=n>linearValue</span><span class=p>;</span>
</span><span id=example-7-8><a id=example-7-8 name=example-7-8></a><span class=w>        </span><span class=kt>uint32_t</span><span class=w>    </span><span class=n>hashValue</span><span class=p>;</span>
</span><span id=example-7-9><a id=example-7-9 name=example-7-9></a><span class=w>        </span><span class=kt>char</span><span class=w>        </span><span class=n>text</span><span class=p>[</span><span class=n>stringLength</span><span class=p>];</span>
</span><span id=example-7-10><a id=example-7-10 name=example-7-10></a><span class=w>    </span><span class=p>}</span>
</span><span id=example-7-11><a id=example-7-11 name=example-7-11></a><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p>Instead of storing the raw value, properties may save a hash instead, which is then used to look up the corresponding value from the hash table.</p> <h2 id=implementation>Implementation<a class=headerlink href=#implementation title="Permanent link"></a></h2> <p>As mentioned in the opening paragraph, classes may use the described functionality by overloading the <code>Archive</code> and <code>Unarchive</code> virtual methods, which pass an instance of <code>zCArchiver</code> by reference. When the class instance is then serialized and/or parsed, these methods are called and perform the desired serialization/parsing work.</p> <p>The class uses methods provided by the <code>zCArchiver</code> instance within these routines. These methods return/accept a value of a specific type (e.g. ReadInt/WriteInt), while they do the actual reading/writing work behind the scenes based on the current mode (ASCII/Binary/BinSafe). The programmer writing the class then does not care whether the final archive will be saved as ASCII, Binary or BinSafe, as they only use the <code>zCArchiver</code> Read* and Write* methods.</p> <h3 id=a-practical-example>A practical example<a class=headerlink href=#a-practical-example title="Permanent link"></a></h3> <p>Let's propose that we have a class which is declared like so:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#example-8-1> 1</a></span>
<span class=normal><a href=#example-8-2> 2</a></span>
<span class=normal><a href=#example-8-3> 3</a></span>
<span class=normal><a href=#example-8-4> 4</a></span>
<span class=normal><a href=#example-8-5> 5</a></span>
<span class=normal><a href=#example-8-6> 6</a></span>
<span class=normal><a href=#example-8-7> 7</a></span>
<span class=normal><a href=#example-8-8> 8</a></span>
<span class=normal><a href=#example-8-9> 9</a></span>
<span class=normal><a href=#example-8-10>10</a></span>
<span class=normal><a href=#example-8-11>11</a></span>
<span class=normal><a href=#example-8-12>12</a></span>
<span class=normal><a href=#example-8-13>13</a></span>
<span class=normal><a href=#example-8-14>14</a></span>
<span class=normal><a href=#example-8-15>15</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=example-8-1><a id=example-8-1 name=example-8-1></a><span class=k>class</span><span class=w> </span><span class=nc>zCMyClass</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>zCObject</span>
</span><span id=example-8-2><a id=example-8-2 name=example-8-2></a><span class=p>{</span>
</span><span id=example-8-3><a id=example-8-3 name=example-8-3></a><span class=k>public</span><span class=o>:</span>
</span><span id=example-8-4><a id=example-8-4 name=example-8-4></a>
</span><span id=example-8-5><a id=example-8-5 name=example-8-5></a><span class=w>    </span><span class=n>zCMyClass</span><span class=p>()</span><span class=w>                </span><span class=p>{}</span>
</span><span id=example-8-6><a id=example-8-6 name=example-8-6></a><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=o>~</span><span class=n>zCMyClass</span><span class=p>()</span><span class=w>    </span><span class=p>{}</span>
</span><span id=example-8-7><a id=example-8-7 name=example-8-7></a>
</span><span id=example-8-8><a id=example-8-8 name=example-8-8></a><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>Archive</span><span class=p>(</span><span class=n>zCArchiver</span><span class=o>&amp;</span><span class=p>);</span>
</span><span id=example-8-9><a id=example-8-9 name=example-8-9></a><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>Unarchive</span><span class=p>(</span><span class=n>zCArchiver</span><span class=o>&amp;</span><span class=p>);</span>
</span><span id=example-8-10><a id=example-8-10 name=example-8-10></a>
</span><span id=example-8-11><a id=example-8-11 name=example-8-11></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>myInt</span><span class=p>;</span>
</span><span id=example-8-12><a id=example-8-12 name=example-8-12></a><span class=w>    </span><span class=n>zCMyClass</span><span class=o>*</span><span class=w> </span><span class=n>myObject</span><span class=p>;</span>
</span><span id=example-8-13><a id=example-8-13 name=example-8-13></a><span class=w>    </span><span class=n>zCMyClass</span><span class=o>*</span><span class=w> </span><span class=n>secondPointerToMyObject</span><span class=p>;</span>
</span><span id=example-8-14><a id=example-8-14 name=example-8-14></a>
</span><span id=example-8-15><a id=example-8-15 name=example-8-15></a><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p>The hypothetical class then implements these virtual functions:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#example-9-1> 1</a></span>
<span class=normal><a href=#example-9-2> 2</a></span>
<span class=normal><a href=#example-9-3> 3</a></span>
<span class=normal><a href=#example-9-4> 4</a></span>
<span class=normal><a href=#example-9-5> 5</a></span>
<span class=normal><a href=#example-9-6> 6</a></span>
<span class=normal><a href=#example-9-7> 7</a></span>
<span class=normal><a href=#example-9-8> 8</a></span>
<span class=normal><a href=#example-9-9> 9</a></span>
<span class=normal><a href=#example-9-10>10</a></span>
<span class=normal><a href=#example-9-11>11</a></span>
<span class=normal><a href=#example-9-12>12</a></span>
<span class=normal><a href=#example-9-13>13</a></span>
<span class=normal><a href=#example-9-14>14</a></span>
<span class=normal><a href=#example-9-15>15</a></span>
<span class=normal><a href=#example-9-16>16</a></span>
<span class=normal><a href=#example-9-17>17</a></span>
<span class=normal><a href=#example-9-18>18</a></span>
<span class=normal><a href=#example-9-19>19</a></span>
<span class=normal><a href=#example-9-20>20</a></span>
<span class=normal><a href=#example-9-21>21</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=example-9-1><a id=example-9-1 name=example-9-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zCMyClass::Archive</span><span class=p>(</span><span class=n>zCArchiver</span><span class=o>&amp;</span><span class=w> </span><span class=n>archiver</span><span class=p>)</span>
</span><span id=example-9-2><a id=example-9-2 name=example-9-2></a><span class=p>{</span>
</span><span id=example-9-3><a id=example-9-3 name=example-9-3></a><span class=w>    </span><span class=n>archiver</span><span class=p>.</span><span class=n>WriteInt</span><span class=p>(</span><span class=s>"myInt"</span><span class=p>,</span><span class=w> </span><span class=n>myInt</span><span class=p>);</span>
</span><span id=example-9-4><a id=example-9-4 name=example-9-4></a>
</span><span id=example-9-5><a id=example-9-5 name=example-9-5></a><span class=w>    </span><span class=n>archiver</span><span class=p>.</span><span class=n>WriteObject</span><span class=p>(</span><span class=s>"myObject"</span><span class=p>,</span><span class=w> </span><span class=n>myObject</span><span class=p>);</span>
</span><span id=example-9-6><a id=example-9-6 name=example-9-6></a>
</span><span id=example-9-7><a id=example-9-7 name=example-9-7></a><span class=w>    </span><span class=n>archiver</span><span class=p>.</span><span class=n>WriteChunkStart</span><span class=p>(</span><span class=s>"myChunk"</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>);</span>
</span><span id=example-9-8><a id=example-9-8 name=example-9-8></a><span class=w>    </span><span class=n>archiver</span><span class=p>.</span><span class=n>WriteObject</span><span class=p>(</span><span class=s>"secondPointerToMyObject"</span><span class=p>,</span><span class=w> </span><span class=n>secondPointerToMyObject</span><span class=p>);</span>
</span><span id=example-9-9><a id=example-9-9 name=example-9-9></a><span class=w>    </span><span class=n>archiver</span><span class=p>.</span><span class=n>WriteChunkEnd</span><span class=p>();</span>
</span><span id=example-9-10><a id=example-9-10 name=example-9-10></a><span class=p>}</span>
</span><span id=example-9-11><a id=example-9-11 name=example-9-11></a>
</span><span id=example-9-12><a id=example-9-12 name=example-9-12></a><span class=kt>void</span><span class=w> </span><span class=nf>zCMyClass::Unarchive</span><span class=p>(</span><span class=n>zCArchiver</span><span class=o>&amp;</span><span class=w> </span><span class=n>archiver</span><span class=p>)</span>
</span><span id=example-9-13><a id=example-9-13 name=example-9-13></a><span class=p>{</span>
</span><span id=example-9-14><a id=example-9-14 name=example-9-14></a><span class=w>    </span><span class=n>archiver</span><span class=p>.</span><span class=n>ReadInt</span><span class=p>(</span><span class=s>"myInt"</span><span class=p>,</span><span class=w> </span><span class=n>myInt</span><span class=p>);</span>
</span><span id=example-9-15><a id=example-9-15 name=example-9-15></a>
</span><span id=example-9-16><a id=example-9-16 name=example-9-16></a><span class=w>    </span><span class=n>myObject</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>dynamic_cast</span><span class=o>&lt;</span><span class=n>zCMyClass</span><span class=o>*&gt;</span><span class=p>(</span><span class=n>archiver</span><span class=p>.</span><span class=n>ReadObject</span><span class=p>(</span><span class=s>"myObject"</span><span class=p>));</span>
</span><span id=example-9-17><a id=example-9-17 name=example-9-17></a>
</span><span id=example-9-18><a id=example-9-18 name=example-9-18></a><span class=w>    </span><span class=n>archiver</span><span class=p>.</span><span class=n>ReadChunkStart</span><span class=p>(</span><span class=s>"myChunk"</span><span class=p>);</span>
</span><span id=example-9-19><a id=example-9-19 name=example-9-19></a><span class=w>    </span><span class=n>secondPointerToMyObject</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>dynamic_cast</span><span class=o>&lt;</span><span class=n>zCMyClass</span><span class=o>*&gt;</span><span class=p>(</span><span class=n>archiver</span><span class=p>.</span><span class=n>ReadObject</span><span class=p>(</span><span class=s>"secondPointerToMyObject"</span><span class=p>));</span>
</span><span id=example-9-20><a id=example-9-20 name=example-9-20></a><span class=w>    </span><span class=n>archiver</span><span class=p>.</span><span class=n>ReadChunkEnd</span><span class=p>();</span>
</span><span id=example-9-21><a id=example-9-21 name=example-9-21></a><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>We then initialize the class in the following way:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#example-10-1>1</a></span>
<span class=normal><a href=#example-10-2>2</a></span>
<span class=normal><a href=#example-10-3>3</a></span>
<span class=normal><a href=#example-10-4>4</a></span>
<span class=normal><a href=#example-10-5>5</a></span>
<span class=normal><a href=#example-10-6>6</a></span>
<span class=normal><a href=#example-10-7>7</a></span>
<span class=normal><a href=#example-10-8>8</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=example-10-1><a id=example-10-1 name=example-10-1></a><span class=n>zCMyClass</span><span class=w> </span><span class=n>object</span><span class=p>;</span>
</span><span id=example-10-2><a id=example-10-2 name=example-10-2></a>
</span><span id=example-10-3><a id=example-10-3 name=example-10-3></a><span class=n>object</span><span class=p>.</span><span class=n>myInt</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>12121212</span><span class=p>;</span>
</span><span id=example-10-4><a id=example-10-4 name=example-10-4></a>
</span><span id=example-10-5><a id=example-10-5 name=example-10-5></a><span class=n>object</span><span class=p>.</span><span class=n>myObject</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>zCMyClass</span><span class=p>();</span>
</span><span id=example-10-6><a id=example-10-6 name=example-10-6></a><span class=n>object</span><span class=p>.</span><span class=n>myObject</span><span class=o>-&gt;</span><span class=n>myInt</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>34343434</span><span class=p>;</span>
</span><span id=example-10-7><a id=example-10-7 name=example-10-7></a>
</span><span id=example-10-8><a id=example-10-8 name=example-10-8></a><span class=n>object</span><span class=p>.</span><span class=n>secondPointerToMyObject</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>object</span><span class=p>.</span><span class=n>myObject</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>If we now serialized, or to use the engine's term "archived", this instance into an ASCII archive, the result would look like this:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#example-11-1> 1</a></span>
<span class=normal><a href=#example-11-2> 2</a></span>
<span class=normal><a href=#example-11-3> 3</a></span>
<span class=normal><a href=#example-11-4> 4</a></span>
<span class=normal><a href=#example-11-5> 5</a></span>
<span class=normal><a href=#example-11-6> 6</a></span>
<span class=normal><a href=#example-11-7> 7</a></span>
<span class=normal><a href=#example-11-8> 8</a></span>
<span class=normal><a href=#example-11-9> 9</a></span>
<span class=normal><a href=#example-11-10>10</a></span>
<span class=normal><a href=#example-11-11>11</a></span>
<span class=normal><a href=#example-11-12>12</a></span>
<span class=normal><a href=#example-11-13>13</a></span>
<span class=normal><a href=#example-11-14>14</a></span>
<span class=normal><a href=#example-11-15>15</a></span>
<span class=normal><a href=#example-11-16>16</a></span>
<span class=normal><a href=#example-11-17>17</a></span>
<span class=normal><a href=#example-11-18>18</a></span>
<span class=normal><a href=#example-11-19>19</a></span>
<span class=normal><a href=#example-11-20>20</a></span>
<span class=normal><a href=#example-11-21>21</a></span>
<span class=normal><a href=#example-11-22>22</a></span>
<span class=normal><a href=#example-11-23>23</a></span>
<span class=normal><a href=#example-11-24>24</a></span>
<span class=normal><a href=#example-11-25>25</a></span>
<span class=normal><a href=#example-11-26>26</a></span>
<span class=normal><a href=#example-11-27>27</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=example-11-1><a id=example-11-1 name=example-11-1></a>ZenGin Archive
</span><span id=example-11-2><a id=example-11-2 name=example-11-2></a>ver 1
</span><span id=example-11-3><a id=example-11-3 name=example-11-3></a>zCArchiverGeneric
</span><span id=example-11-4><a id=example-11-4 name=example-11-4></a>ASCII
</span><span id=example-11-5><a id=example-11-5 name=example-11-5></a>saveGame 0
</span><span id=example-11-6><a id=example-11-6 name=example-11-6></a>date 3.7.2022 0:0:0
</span><span id=example-11-7><a id=example-11-7 name=example-11-7></a>user GMC
</span><span id=example-11-8><a id=example-11-8 name=example-11-8></a>END
</span><span id=example-11-9><a id=example-11-9 name=example-11-9></a>objects 2     
</span><span id=example-11-10><a id=example-11-10 name=example-11-10></a>END
</span><span id=example-11-11><a id=example-11-11 name=example-11-11></a>
</span><span id=example-11-12><a id=example-11-12 name=example-11-12></a>[% zCMyClass 0 0]
</span><span id=example-11-13><a id=example-11-13 name=example-11-13></a>    myInt=int:12121212
</span><span id=example-11-14><a id=example-11-14 name=example-11-14></a>    [myObject zCMyClass 0 1]
</span><span id=example-11-15><a id=example-11-15 name=example-11-15></a>        myInt=int:34343434
</span><span id=example-11-16><a id=example-11-16 name=example-11-16></a>        [myObject % 0 0]
</span><span id=example-11-17><a id=example-11-17 name=example-11-17></a>        []
</span><span id=example-11-18><a id=example-11-18 name=example-11-18></a>        [myChunk % 0 0]
</span><span id=example-11-19><a id=example-11-19 name=example-11-19></a>            [secondPointerToMyObject % 0 0]
</span><span id=example-11-20><a id=example-11-20 name=example-11-20></a>            []
</span><span id=example-11-21><a id=example-11-21 name=example-11-21></a>        []
</span><span id=example-11-22><a id=example-11-22 name=example-11-22></a>    []
</span><span id=example-11-23><a id=example-11-23 name=example-11-23></a>    [myChunk % 0 0]
</span><span id=example-11-24><a id=example-11-24 name=example-11-24></a>        [secondPointerToMyObject 춶 0 1]
</span><span id=example-11-25><a id=example-11-25 name=example-11-25></a>        []
</span><span id=example-11-26><a id=example-11-26 name=example-11-26></a>    []
</span><span id=example-11-27><a id=example-11-27 name=example-11-27></a>[]
</span></code></pre></div></td></tr></table></div> <p>Notice how <code>secondPointerToMyObject</code> doesn't have any contents. The character <code>춶</code> tells the parser that this object already exists in the objectList, and that instead of creating a new instance, it should return an existing instance which is stored under index <code>1</code> in the objectList. <br> This allows an instance to be referenced from multiple places, without the need to worry about duplicity.</p> <p>If we used Binary or BinSafe mode, we would see a big blob of binary data instead. This would, of course, store the exact same data, although in a slightly less human-readable format.</p> <h2 id=final-thoughts>Final thoughts<a class=headerlink href=#final-thoughts title="Permanent link"></a></h2> <p>We hope this helps you better understand the inner workings of ZenGin. If you want to see how Piranha Bytes went about implementing a much more advanced version of this system for their next engine, check out <a href=../../../genome/general_info/object_persistence/ >Genome's object persistence system</a>.</p></div> <hr> <div class=md-source-file> <small> Posledn칤 aktualizace: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2023-02-26 03:00:42</span> </small> </div> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Z치pat칤> <a href=../directory_structure/ class="md-footer__link md-footer__link--prev" aria-label="P콏edchoz칤: Directory structure" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> P콏edchoz칤 </span> <div class=md-ellipsis> Directory structure </div> </div> </a> <a href=../vdfs/ class="md-footer__link md-footer__link--next" aria-label="Dal코칤: VDFS virtual file system" rel=next> <div class=md-footer__title> <span class=md-footer__direction> Dal코칤 </span> <div class=md-ellipsis> VDFS virtual file system </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://discord.gg/mCpS5b5SUY target=_blank rel=noopener title="Gothic Modding Comunity Discord Server" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg> </a> <a href=https://github.com/Gothic-Modding-Community/gmc target=_blank rel=noopener title="Gothic Modding Comunity Github repository" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.tabs", "navigation.indexes", "navigation.footer", "content.code.copy", "content.action.edit", "content.action.view"], "search": "../../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Zkop\u00edrov\u00e1no do schr\u00e1nky", "clipboard.copy": "Kop\u00edrovat do schr\u00e1nky", "search.result.more.one": "1 dal\u0161\u00ed na t\u00e9to str\u00e1nce", "search.result.more.other": "# v\u00edce na t\u00e9to str\u00e1nce", "search.result.none": "Nenalezeny \u017e\u00e1dn\u00e9 dokumenty", "search.result.one": "Nalezen\u00fd dokument: 1", "search.result.other": "Nalezen\u00e9 dokumenty: #", "search.result.placeholder": "Pi\u0161te co se m\u00e1 vyhledat", "search.result.term.missing": "Chyb\u011bj\u00edc\u00ed", "select.version": "Vyberte verzi"}}</script> <script src=../../../../assets/javascripts/bundle.407015b8.min.js></script> <script src=../../../../assets/javascripts/extra.9f35b1.min.js></script> </body> </html>